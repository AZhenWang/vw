# 创建表

create table daily(
   id INT NOT NULL AUTO_INCREMENT,
   ts_code VARCHAR(9) NOT NULL,
   trade_date VARCHAR(8) NOT NULL,
   open FLOAT4 not null,
   high FLOAT4 not null,
   close FLOAT4 not null,
   low FLOAT4 not null,
   vol double null comment'成交量（手）',
   amount double null comment'成交额 （千元）',
   created_at timestamp not null default CURRENT_TIMESTAMP,
   PRIMARY KEY(id),
   UNIQUE KEY `code_date_unique_idx` (`trade_date`,`ts_code`)
)ENGINE=MyISAM DEFAULT CHARSET=utf8 comment'日线行情';


create table daily_basic (
   id int not null auto_increment,
   ts_code	varchar(9) not null comment	'股票代码',
   trade_date varchar(8) not null comment '交易日期',
   close	float	not null comment'当日收盘价',
   turnover_rate	float	null comment'换手率',
   turnover_rate_f	float	null comment '换手率(自由流通股)',
   pe	float	null comment'市盈率(总市值/净利润)',
   pe_ttm	float null	comment'市盈率(TTM)',
   pb	float	null comment'市净率（总市值/净资产）',
   ps	float	null comment '市销率',
   ps_ttm	float	comment '市销率（TTM）',
   total_share	float null comment'总股本 （万）',
   float_share	float	null comment '流通股本 （万）',
   free_share	float	null comment '自由流通股本 （万）',
   total_mv	float	null comment '总市值 （万元）',
   circ_mv	float	null comment '流通市值（万元）',
   created_at timestamp not null default CURRENT_TIMESTAMP,
   PRIMARY KEY(id),
   UNIQUE KEY `code_date_unique_idx` (`trade_date`,`ts_code`)
)ENGINE=MyISAM DEFAULT CHARSET=utf8 comment'每日指标';


create table adj_factor(
   id INT NOT NULL AUTO_INCREMENT,
   ts_code VARCHAR(9) NOT NULL,
   trade_date VARCHAR(8) NOT NULL,
   adj_factor FLOAT not null comment '复权因子',
   created_at timestamp not null default CURRENT_TIMESTAMP,
   PRIMARY KEY(id),
   UNIQUE KEY `code_date_unique_idx` (`trade_date`,`ts_code`)
)ENGINE=MyISAM DEFAULT CHARSET=utf8 comment'复权因子';

create table stock_basic(
   ts_code VARCHAR(9) NOT NULL,
   name	VARCHAR(20)  NULL	comment'股票名称',
   area	VARCHAR(10)  NULL	comment'所在地域',
   industry	VARCHAR(10)  NULL	comment'所属行业',
   market	VARCHAR(6)  NULL	comment'市场类型 （主板/中小板/创业板）',
   curr_type	VARCHAR(6)  NULL	comment'交易货币',
   list_status	CHAR(1) NOT NULL	comment'上市状态： L上市 D退市 P暂停上市',
   list_date	VARCHAR(8) NOT NULL	comment'上市日期',
   delist_date	VARCHAR(8)  NULL	comment'退市日期',
   is_hs	CHAR(1) NOT NULL	comment'是否沪深港通标的，N否 H沪股通 S深股通',
   PRIMARY KEY(ts_code)
)ENGINE=Innodb DEFAULT CHARSET=utf8 comment'股票列表';

create table classifiers(
   id INT NOT NULL AUTO_INCREMENT,
   ts_code VARCHAR(9) NOT NULL,
   trade_date VARCHAR(8) NOT NULL,
   knn_5 FLOAT null comment 'knn(5天后变化)',
   created_at timestamp not null default CURRENT_TIMESTAMP,
   PRIMARY KEY(id),
   UNIQUE KEY `code_date_unique_idx` (`trade_date`,`ts_code`)
)ENGINE=MyISAM DEFAULT CHARSET=utf8 comment'聚类模型值';


create table thresholds(
   id INT NOT NULL AUTO_INCREMENT,
   ts_code VARCHAR(9) NOT NULL,
   trade_date VARCHAR(8) NOT NULL,
   threshold_20 FLOAT null comment '偏置值',
   created_at timestamp not null default CURRENT_TIMESTAMP,
   PRIMARY KEY(id),
   UNIQUE KEY `code_date_unique_idx` (`trade_date`,`ts_code`)
)ENGINE=MyISAM DEFAULT CHARSET=utf8 comment'升降的阀值，0.05表示上升趋势趋势，0.03表示下降趋势';
